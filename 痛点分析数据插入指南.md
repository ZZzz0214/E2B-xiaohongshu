# å°çº¢ä¹¦ç—›ç‚¹åˆ†ææ•°æ®æ’å…¥æŒ‡å—

## ğŸ“‹ **æ•°æ®æ’å…¥æµç¨‹**

### **æ­¥éª¤1ï¼šè§£æJSONè¾“å‡º**

åŸºäºä¾‹å­.mdçš„è¾“å‡ºæ ¼å¼ï¼Œæ•°æ®åˆ†ä¸ºä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ï¼š
- `pain_point_analysis[]` - å…·ä½“å†…å®¹åˆ†ææ•°æ®
- `summary_insights{}` - æ±‡æ€»æ´å¯Ÿæ•°æ®

### **æ­¥éª¤2ï¼šæŒ‰è¡¨ä¾èµ–é¡ºåºæ’å…¥æ•°æ®**

```
æ’å…¥é¡ºåºï¼š
1. xiaohongshu_pain_analysis (ä¸»è¡¨)
2. è¯¦æƒ…è¡¨ç»„ (å¹¶è¡Œæ’å…¥)
   â”œâ”€â”€ xiaohongshu_pain_points
   â”œâ”€â”€ xiaohongshu_solved_problems  
   â”œâ”€â”€ xiaohongshu_user_needs
   â”œâ”€â”€ xiaohongshu_usage_scenarios
   â”œâ”€â”€ xiaohongshu_brand_mentions
   â”œâ”€â”€ xiaohongshu_product_models
   â”œâ”€â”€ xiaohongshu_emotional_keywords
   â””â”€â”€ xiaohongshu_post_tags (ä»…å¸–å­)
3. xiaohongshu_summary_insights (æ±‡æ€»ä¸»è¡¨)
4. æ±‡æ€»è¯¦æƒ…è¡¨ç»„ (å¹¶è¡Œæ’å…¥)
   â”œâ”€â”€ xiaohongshu_high_frequency_pains
   â”œâ”€â”€ xiaohongshu_scenario_pain_ranking
   â”œâ”€â”€ xiaohongshu_brand_pain_correlation
   â”œâ”€â”€ xiaohongshu_urgent_needs
   â””â”€â”€ xiaohongshu_market_opportunities
```

## ğŸ”¨ **å…·ä½“æ’å…¥SQLç¤ºä¾‹**

### **ç¬¬ä¸€é˜¶æ®µï¼šä¸»è¡¨æ•°æ®æ’å…¥**

```sql
-- 1. æ’å…¥ç—›ç‚¹åˆ†æä¸»è¡¨
-- åŸºäº pain_point_analysis[0] çš„æ•°æ®
INSERT INTO xiaohongshu_pain_analysis (
    content_id, content_type, user_name, content_snippet,
    overall_sentiment, intensity_score, user_satisfaction,
    purchase_intent, recommendation_likelihood, competitor_comparison, price_sensitivity,
    analysis_batch
) VALUES (
    '68be9be5000000001b01dc71',  -- content_id
    'post',                       -- content_type  
    'å°çº¢è–¯68AFD76F',             -- user_name
    'æƒ³è¦ä½ ä»¬çš„å†…è£¤æ¨èç»™æˆ‘',      -- content_snippet
    'ä¸­æ€§',                       -- overall_sentiment
    0.50,                         -- intensity_score
    'ä¸€èˆ¬',                       -- user_satisfaction
    'é«˜',                         -- purchase_intent
    'å¯èƒ½æ¨è',                   -- recommendation_likelihood
    'æ— ',                         -- competitor_comparison (æ˜¯å¦å­˜åœ¨ç«å“å¯¹æ¯”è½¬æ¢)
    'ä¸­ç­‰',                       -- price_sensitivity
    'batch_20241221_001'          -- analysis_batch (åˆ†ææ‰¹æ¬¡)
);
```

### **ç¬¬äºŒé˜¶æ®µï¼šè¯¦æƒ…è¡¨æ•°æ®æ’å…¥**

#### **A. ç—›ç‚¹è¯¦æƒ…è¡¨**
```sql
-- åŸºäº identified_pain_points[] æ•°ç»„
INSERT INTO xiaohongshu_pain_points (content_id, pain_point, category, severity, evidence)
VALUES 
('68be9be5000000001b01dc71', 'ç¼ºä¹æ»¡æ„çš„å†…è£¤æ¨è', 'èˆ’é€‚åº¦', 'ä¸­ç­‰', 'æƒ³è¦ä½ ä»¬çš„å†…è£¤æ¨èç»™æˆ‘');
```

#### **B. ç”¨æˆ·éœ€æ±‚è¡¨**
```sql
-- åŸºäº user_needs[] æ•°ç»„  
INSERT INTO xiaohongshu_user_needs (content_id, need, priority, need_type)
VALUES 
('68be9be5000000001b01dc71', 'å¯»æ‰¾èˆ’é€‚çš„å†…è£¤', 'é«˜', 'åŠŸèƒ½æ€§');
```

#### **C. ä½¿ç”¨åœºæ™¯è¡¨**
```sql
-- åŸºäº usage_scenarios[] æ•°ç»„
INSERT INTO xiaohongshu_usage_scenarios (content_id, scenario, frequency, pain_intensity)
VALUES 
('68be9be5000000001b01dc71', 'æ—¥å¸¸é€šå‹¤', 'é«˜é¢‘', 'ä¸­');
```

#### **D. æƒ…æ„Ÿå…³é”®è¯è¡¨**
```sql
-- åŸºäº emotional_analysis.emotional_keywords[] æ•°ç»„
INSERT INTO xiaohongshu_emotional_keywords (content_id, keyword, keyword_order)
VALUES 
('68be9be5000000001b01dc71', 'æ¨è', 1);
```

#### **E. å“ç‰ŒæåŠè¡¨**
```sql
-- åŸºäº brand_mentions[] æ•°ç»„ (è¯¥ä¾‹å­ä¸ºç©ºæ•°ç»„ï¼Œè·³è¿‡)
-- å¦‚æœæœ‰æ•°æ®ï¼Œå¦‚ï¼š["æµ™é”¦"]
INSERT INTO xiaohongshu_brand_mentions (content_id, brand_name, mention_order)
VALUES 
('68c3a47f000000001d00d976', 'æµ™é”¦', 1);
```

#### **F. äº§å“å‹å·è¡¨**  
```sql
-- åŸºäº product_models[] æ•°ç»„
-- ä¾‹å­ï¼š68bea6ac0000000030025e1a çš„æ•°æ®
INSERT INTO xiaohongshu_product_models (content_id, product_model, mention_order)
VALUES 
('68bea6ac0000000030025e1a', 'è«ä»£å°”å…¨æ£‰åŠ é•¿åº•æ¡£ä¸­é«˜è…°', 1);
```

#### **G. è§£å†³æ–¹æ¡ˆè¡¨**
```sql
-- åŸºäº solved_problems[] æ•°ç»„
-- ä¾‹å­ï¼š68becdba00000000300244cc çš„æ•°æ®
INSERT INTO xiaohongshu_solved_problems (content_id, problem, solution, satisfaction)
VALUES 
('68becdba00000000300244cc', 'å†…è£¤å¡è£†é—®é¢˜', 'é€‰æ‹©ä¸å¡è£†çš„å†…è£¤', 'éå¸¸æ»¡æ„');
```

#### **H. å¸–å­æ ‡ç­¾è¡¨ (ä»…å¸–å­ç±»å‹)**
```sql
-- åŸºäº tags[] æ•°ç»„ (æ³¨æ„ï¼šä¾‹å­ä¸­æ²¡æœ‰tagsï¼Œä½†æç¤ºè¯ä¸­æœ‰)
-- å‡è®¾å¸–å­æœ‰æ ‡ç­¾ï¼š["å†…è¡£æ¨è", "æ— é’¢åœˆ", "èˆ’é€‚"]
INSERT INTO xiaohongshu_post_tags (content_id, tag_name, tag_order)
VALUES 
('68be9be5000000001b01dc71', 'å†…è¡£æ¨è', 1),
('68be9be5000000001b01dc71', 'æ— é’¢åœˆ', 2),
('68be9be5000000001b01dc71', 'èˆ’é€‚', 3);
```

### **ç¬¬ä¸‰é˜¶æ®µï¼šæ±‡æ€»æ•°æ®æ’å…¥**

#### **A. æ±‡æ€»æ´å¯Ÿä¸»è¡¨**
```sql
-- åŸºäº summary_insights å¯¹è±¡
INSERT INTO xiaohongshu_summary_insights (
    analysis_batch, total_contents_analyzed, posts_count, comments_count,
    positive_sentiment_count, negative_sentiment_count, neutral_sentiment_count
) VALUES (
    'batch_20241221_001',  -- analysis_batch
    10,                    -- total_contents_analyzed (pain_point_analysisæ•°ç»„é•¿åº¦)
    1,                     -- posts_count (content_type='post'çš„æ•°é‡)
    9,                     -- comments_count (content_type='comment'çš„æ•°é‡)
    4,                     -- positive_sentiment_count  
    0,                     -- negative_sentiment_count
    6                      -- neutral_sentiment_count
);
```

#### **B. é«˜é¢‘ç—›ç‚¹è¡¨**
```sql
-- åŸºäº high_frequency_pain_points[] æ•°ç»„
INSERT INTO xiaohongshu_high_frequency_pains (analysis_batch, pain_point, frequency_rank, occurrence_count)
VALUES 
('batch_20241221_001', 'å°ºç åå°', 1, 1),
('batch_20241221_001', 'çº¿å¤´å¤š', 2, 1),
('batch_20241221_001', 'ç¼ºä¹è¿è´¹é™©', 3, 1);
```

#### **C. åœºæ™¯ç—›ç‚¹æ’åè¡¨**
```sql
-- åŸºäº scenario_pain_ranking å¯¹è±¡
INSERT INTO xiaohongshu_scenario_pain_ranking (analysis_batch, scenario_name, pain_point, ranking)
VALUES 
('batch_20241221_001', 'æ—¥å¸¸é€šå‹¤', 'å°ºç åå°', 1),
('batch_20241221_001', 'æ—¥å¸¸é€šå‹¤', 'çº¿å¤´å¤š', 2),
('batch_20241221_001', 'æ—¥å¸¸é€šå‹¤', 'ç¼ºä¹è¿è´¹é™©', 3);
```

#### **D. ç´§æ€¥éœ€æ±‚è¡¨**
```sql
-- åŸºäº urgent_needs[] æ•°ç»„
INSERT INTO xiaohongshu_urgent_needs (analysis_batch, need_description, urgency_level, priority_rank)
VALUES 
('batch_20241221_001', 'é«˜èˆ’é€‚åº¦å†…è£¤', 'é«˜', 1),
('batch_20241221_001', 'ä¸å¡è£†çš„å†…è£¤', 'é«˜', 2);
```

#### **E. å¸‚åœºæœºä¼šè¡¨**
```sql
-- åŸºäº market_opportunities[] æ•°ç»„
INSERT INTO xiaohongshu_market_opportunities (analysis_batch, opportunity_description, opportunity_type, potential_impact, priority_rank)
VALUES 
('batch_20241221_001', 'æä¾›æ›´å¤šå°ºç é€‰æ‹©', 'äº§å“åˆ›æ–°', 'é«˜', 1),
('batch_20241221_001', 'æ”¹è¿›å†…è£¤è®¾è®¡å‡å°‘çº¿å¤´', 'äº§å“åˆ›æ–°', 'ä¸­', 2),
('batch_20241221_001', 'å¢åŠ è¿è´¹é™©æœåŠ¡', 'æœåŠ¡ä¼˜åŒ–', 'ä¸­', 3);
```

## ğŸ”„ **æ‰¹é‡æ’å…¥å¤„ç†é€»è¾‘**

### **Pythonç¤ºä¾‹ä»£ç **

```python
import json
import pymysql
from datetime import datetime

def insert_pain_analysis_data(json_data, analysis_batch):
    """æ’å…¥ç—›ç‚¹åˆ†ææ•°æ®åˆ°æ•°æ®åº“"""
    
    # 1. æ’å…¥ä¸»è¡¨æ•°æ®
    for item in json_data['pain_point_analysis']:
        insert_main_analysis(item, analysis_batch)
        
        # 2. æ’å…¥è¯¦æƒ…è¡¨æ•°æ®
        insert_detail_tables(item)
    
    # 3. æ’å…¥æ±‡æ€»æ•°æ®
    insert_summary_data(json_data['summary_insights'], analysis_batch)

def insert_main_analysis(item, batch):
    """æ’å…¥ä¸»åˆ†æè¡¨"""
    sql = """
    INSERT INTO xiaohongshu_pain_analysis 
    (content_id, content_type, user_name, content_snippet, 
     overall_sentiment, intensity_score, user_satisfaction,
     purchase_intent, recommendation_likelihood, competitor_comparison, 
     price_sensitivity, analysis_batch)
    VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)
    """
    
    # å¤„ç†competitor_comparisonå­—æ®µè½¬æ¢
    competitor_comparison = 'æœ‰' if item['commercial_insights']['competitor_comparison'] == 'æ˜¯' else 'æ— '
    
    params = (
        item['content_id'],
        item['content_type'], 
        item['user_name'],
        item['content_snippet'],
        item['emotional_analysis']['overall_sentiment'],
        item['emotional_analysis']['intensity_score'],
        item['emotional_analysis']['user_satisfaction'],
        item['commercial_insights']['purchase_intent'],
        item['commercial_insights']['recommendation_likelihood'],
        competitor_comparison,
        item['commercial_insights']['price_sensitivity'],
        batch
    )
    
    execute_sql(sql, params)

def insert_detail_tables(item):
    """æ’å…¥è¯¦æƒ…è¡¨æ•°æ®"""
    content_id = item['content_id']
    
    # ç—›ç‚¹è¯¦æƒ…
    for pain in item['identified_pain_points']:
        sql = "INSERT INTO xiaohongshu_pain_points (content_id, pain_point, category, severity, evidence) VALUES (%s, %s, %s, %s, %s)"
        execute_sql(sql, (content_id, pain['pain_point'], pain['category'], pain['severity'], pain['evidence']))
    
    # ç”¨æˆ·éœ€æ±‚
    for need in item['user_needs']:
        sql = "INSERT INTO xiaohongshu_user_needs (content_id, need, priority, need_type) VALUES (%s, %s, %s, %s)"
        execute_sql(sql, (content_id, need['need'], need['priority'], need['type']))
    
    # ä½¿ç”¨åœºæ™¯
    for scenario in item['usage_scenarios']:
        sql = "INSERT INTO xiaohongshu_usage_scenarios (content_id, scenario, frequency, pain_intensity) VALUES (%s, %s, %s, %s)"
        execute_sql(sql, (content_id, scenario['scenario'], scenario['frequency'], scenario['pain_intensity']))
    
    # æƒ…æ„Ÿå…³é”®è¯
    for i, keyword in enumerate(item['emotional_analysis']['emotional_keywords'], 1):
        sql = "INSERT INTO xiaohongshu_emotional_keywords (content_id, keyword, keyword_order) VALUES (%s, %s, %s)"
        execute_sql(sql, (content_id, keyword, i))
    
    # å“ç‰ŒæåŠ
    for i, brand in enumerate(item['brand_mentions'], 1):
        sql = "INSERT INTO xiaohongshu_brand_mentions (content_id, brand_name, mention_order) VALUES (%s, %s, %s)"
        execute_sql(sql, (content_id, brand, i))
    
    # äº§å“å‹å·
    for i, model in enumerate(item['product_models'], 1):
        sql = "INSERT INTO xiaohongshu_product_models (content_id, product_model, mention_order) VALUES (%s, %s, %s)"
        execute_sql(sql, (content_id, model, i))
    
    # è§£å†³æ–¹æ¡ˆ
    for solution in item['solved_problems']:
        sql = "INSERT INTO xiaohongshu_solved_problems (content_id, problem, solution, satisfaction) VALUES (%s, %s, %s, %s)"
        execute_sql(sql, (content_id, solution['problem'], solution['solution'], solution['satisfaction']))
    
    # å¸–å­æ ‡ç­¾ (ä»…å¸–å­ç±»å‹)
    if item['content_type'] == 'post' and 'tags' in item:
        for i, tag in enumerate(item['tags'], 1):
            sql = "INSERT INTO xiaohongshu_post_tags (content_id, tag_name, tag_order) VALUES (%s, %s, %s)"
            execute_sql(sql, (content_id, tag, i))

def insert_summary_data(summary, batch):
    """æ’å…¥æ±‡æ€»æ•°æ®"""
    # æ’å…¥æ±‡æ€»ä¸»è¡¨
    sql = """
    INSERT INTO xiaohongshu_summary_insights 
    (analysis_batch, total_contents_analyzed, posts_count, comments_count)
    VALUES (%s, %s, %s, %s)
    """
    # è¿™é‡Œéœ€è¦æ ¹æ®å®é™…ç»Ÿè®¡è®¡ç®—counts
    execute_sql(sql, (batch, 10, 1, 9))  # ç¤ºä¾‹æ•°æ®
    
    # æ’å…¥é«˜é¢‘ç—›ç‚¹
    for i, pain in enumerate(summary['high_frequency_pain_points'], 1):
        sql = "INSERT INTO xiaohongshu_high_frequency_pains (analysis_batch, pain_point, frequency_rank, occurrence_count) VALUES (%s, %s, %s, %s)"
        execute_sql(sql, (batch, pain, i, 1))  # occurrence_countéœ€è¦å®é™…ç»Ÿè®¡
    
    # æ’å…¥ç´§æ€¥éœ€æ±‚
    for i, need in enumerate(summary['urgent_needs'], 1):
        sql = "INSERT INTO xiaohongshu_urgent_needs (analysis_batch, need_description, urgency_level, priority_rank) VALUES (%s, %s, %s, %s)"
        execute_sql(sql, (batch, need, 'é«˜', i))
    
    # æ’å…¥å¸‚åœºæœºä¼š
    for i, opportunity in enumerate(summary['market_opportunities'], 1):
        sql = "INSERT INTO xiaohongshu_market_opportunities (analysis_batch, opportunity_description, opportunity_type, potential_impact, priority_rank) VALUES (%s, %s, %s, %s, %s)"
        execute_sql(sql, (batch, opportunity, 'äº§å“åˆ›æ–°', 'é«˜', i))

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    # ä»ä¾‹å­.mdè¯»å–JSONæ•°æ®
    with open('ä¾‹å­.md', 'r', encoding='utf-8') as f:
        content = f.read()
    
    # è§£æJSONï¼ˆéœ€è¦æå–JSONéƒ¨åˆ†ï¼‰
    json_data = json.loads(json_content)
    
    # ç”Ÿæˆåˆ†ææ‰¹æ¬¡
    batch_id = f"batch_{datetime.now().strftime('%Y%m%d_%H%M%S')}"
    
    # æ‰§è¡Œæ’å…¥
    insert_pain_analysis_data(json_data, batch_id)
```

## âš ï¸ **æ³¨æ„äº‹é¡¹**

1. **æ•°æ®å®Œæ•´æ€§**ï¼šç¡®ä¿content_idåœ¨ä¸»è¡¨ä¸­å­˜åœ¨åå†æ’å…¥è¯¦æƒ…è¡¨
2. **äº‹åŠ¡å¤„ç†**ï¼šå»ºè®®å°†ä¸€ä¸ªJSONçš„æ‰€æœ‰æ’å…¥æ“ä½œåŒ…è£…åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­
3. **æ‰¹æ¬¡ç®¡ç†**ï¼šä½¿ç”¨analysis_batchå­—æ®µå…³è”åŒä¸€æ‰¹æ¬¡çš„åˆ†ææ•°æ®
4. **æ ‡ç­¾å¤„ç†**ï¼šå¸–å­æ ‡ç­¾è¡¨åªå¤„ç†content_type='post'çš„è®°å½•
5. **æ•°æ®è½¬æ¢**ï¼šæ³¨æ„JSONä¸­çš„å­—æ®µå€¼ä¸æ•°æ®åº“æšä¸¾å€¼çš„æ˜ å°„å…³ç³»
6. **é”™è¯¯å¤„ç†**ï¼šæ·»åŠ é‡å¤æ’å…¥æ£€æµ‹å’Œé”™è¯¯å›æ»šæœºåˆ¶

## ğŸ¯ **æ’å…¥åéªŒè¯**

```sql
-- éªŒè¯æ•°æ®æ’å…¥å®Œæ•´æ€§
SELECT 
    COUNT(*) as total_analysis,
    COUNT(CASE WHEN content_type = 'post' THEN 1 END) as posts,
    COUNT(CASE WHEN content_type = 'comment' THEN 1 END) as comments
FROM xiaohongshu_pain_analysis 
WHERE analysis_batch = 'batch_20241221_001';

-- éªŒè¯è¯¦æƒ…è¡¨æ•°æ®
SELECT 'pain_points' as table_name, COUNT(*) as count FROM xiaohongshu_pain_points WHERE content_id IN (SELECT content_id FROM xiaohongshu_pain_analysis WHERE analysis_batch = 'batch_20241221_001')
UNION ALL
SELECT 'user_needs', COUNT(*) FROM xiaohongshu_user_needs WHERE content_id IN (SELECT content_id FROM xiaohongshu_pain_analysis WHERE analysis_batch = 'batch_20241221_001')
UNION ALL  
SELECT 'scenarios', COUNT(*) FROM xiaohongshu_usage_scenarios WHERE content_id IN (SELECT content_id FROM xiaohongshu_pain_analysis WHERE analysis_batch = 'batch_20241221_001');
```

æŒ‰ç…§è¿™ä¸ªæµç¨‹ï¼Œæ‚¨å°±å¯ä»¥å°†ä¾‹å­.mdä¸­çš„JSONè¾“å‡ºå®Œæ•´åœ°æ’å…¥åˆ°MySQLæ•°æ®åº“ä¸­ï¼
